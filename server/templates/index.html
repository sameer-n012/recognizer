<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Person Cluster Insights</title>
        <link rel="stylesheet" href="/static/style.css" />
    </head>
    <body>
        <div class="app-shell">
            <aside id="sidebar">
                <div class="sidebar-head">
                    <div>
                        <p class="eyebrow">Cluster dashboard</p>
                        <h2>Person Clusters</h2>
                    </div>
                    <button id="refresh-button" title="Refresh clusters">
                        <span>⟳</span>
                    </button>
                </div>
                <p id="metric-tag" class="metric-tag">
                    Loading similarity metric…
                </p>
                <div class="sidebar-scroll">
                    <ul id="cluster-list"></ul>
                </div>
            </aside>
            <main id="content">
                <div class="tab-bar">
                    <button class="tab-button active" data-tab="dashboard">
                        Dashboard
                    </button>
                    <button class="tab-button" data-tab="edit">
                        Edit clusters
                    </button>
                </div>

                <section id="dashboard-view" class="view-panel">
                    <header class="cluster-header">
                        <div>
                            <p class="eyebrow" id="selected-cluster-name">
                                Select a cluster
                            </p>
                            <h1 id="cluster-title">
                                Choose a cluster to inspect
                            </h1>
                        </div>
                        <div class="cluster-pills">
                            <span id="cluster-size-pill" class="pill"
                                >Entities • –</span
                            >
                            <span id="cluster-asset-pill" class="pill"
                                >Assets • –</span
                            >
                        </div>
                    </header>

                    <section id="cluster-summary-panel" class="panel">
                        <div class="panel-title">
                            <h2>Cluster summary</h2>
                            <p id="cluster-summary-description">
                                Select a cluster to reveal per-modality
                                similarity trends and the contributing assets.
                            </p>
                        </div>
                        <div class="summary-grid">
                            <article>
                                <p class="label">Entities</p>
                                <h3 id="cluster-size">–</h3>
                            </article>
                            <article>
                                <p class="label">Distinct assets</p>
                                <h3 id="cluster-assets">–</h3>
                            </article>
                            <article>
                                <p class="label">Asset mix</p>
                                <p id="asset-breakdown" class="muted">–</p>
                            </article>
                            <article>
                                <p class="label">Similarity metric</p>
                                <p id="metric-description" class="muted">–</p>
                            </article>
                        </div>
                    </section>

                    <section class="panel">
                        <div class="panel-title">
                            <h2>Per-modality similarity</h2>
                            <p class="muted">
                                averages relative to the fused cluster centroid
                            </p>
                        </div>
                        <div id="modality-stats" class="modality-grid"></div>
                    </section>

                    <section class="panel full-panel">
                        <div class="panel-title">
                            <h2>Media &amp; similarity</h2>
                            <p class="muted">
                                Each card shows the asset, how many frames or
                                faces were analyzed, and the similarity score
                                for every modality.
                            </p>
                        </div>
                        <div id="item-grid" class="cards-grid">
                            <p class="placeholder">No cluster selected yet.</p>
                        </div>
                    </section>
                </section>

                <section id="edit-view" class="view-panel view-hidden">
                    <header class="cluster-header">
                        <div>
                            <p class="eyebrow">Cluster editor</p>
                            <h1 id="edit-cluster-title">
                                Select a cluster to edit
                            </h1>
                        </div>
                        <div class="cluster-pills">
                            <span id="edit-cluster-size-pill" class="pill"
                                >Selected • 0</span
                            >
                            <span id="edit-cluster-total-pill" class="pill"
                                >Entities • –</span
                            >
                        </div>
                    </header>

                    <div class="edit-layout">
                        <section class="panel edit-panel">
                            <div class="panel-title">
                                <h2>Entities in this cluster</h2>
                                <p class="muted">
                                    Select entities to move into another cluster
                                    or split into a new cluster.
                                </p>
                            </div>
                            <div id="edit-item-grid" class="cards-grid">
                                <p class="placeholder">
                                    No cluster selected yet.
                                </p>
                            </div>
                        </section>

                        <aside class="panel edit-panel edit-actions">
                            <div class="panel-title">
                                <h2>Cluster actions</h2>
                                <p class="muted">
                                    Closest clusters are suggested first.
                                    Actions apply to the selected entities.
                                </p>
                            </div>
                            <div class="action-block">
                                <h3>Suggested targets</h3>
                                <div
                                    id="suggested-clusters"
                                    class="suggested-list"
                                ></div>
                            </div>
                            <div class="action-block">
                                <h3>Manual target</h3>
                                <input
                                    id="manual-cluster-id"
                                    type="number"
                                    placeholder="Cluster ID"
                                />
                                <div class="action-row">
                                    <button
                                        id="move-to-manual"
                                        class="action-btn"
                                    >
                                        Move selected
                                    </button>
                                    <button
                                        id="merge-with-manual"
                                        class="action-btn secondary"
                                    >
                                        Merge cluster
                                    </button>
                                </div>
                            </div>
                            <div class="action-block">
                                <h3>Split selection</h3>
                                <button
                                    id="split-selection"
                                    class="action-btn danger"
                                >
                                    Split selected into new cluster
                                </button>
                            </div>
                        </aside>
                    </div>
                </section>
            </main>
        </div>
        <script src="/static/app.js"></script>
    </body>
</html>
